{# https://craftcms.stackexchange.com/a/1724 #} {% macro srcset(image, maxCssWidth, includeDimensions) %} {%- spaceless %} {# Determine the image output size #} {% set width = (image.width > maxCssWidth ? maxCssWidth : cssWidth) %} {# Output the srcset= attribute value #} {{ image.getUrl(image.width != width ? { width: width }) }} {#- Output the width= and height= attributes if needed #} {%- if includeDimensions %} width="{{ width }}" height="{{ image.getHeight({ width: width }) }}"{% endif %} {% endspaceless -%} {% endmacro %}